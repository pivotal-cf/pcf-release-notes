---
title: PCF Ops Manager v2.1 Release Notes
owner: Ops Manager
---

Pivotal Cloud Foundry is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='how-to-upgrade'></a>How to Upgrade ##

The [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/pivotalcf/2-1/customizing/upgrading-pcf.html) topic contains instructions for upgrading to Pivotal Cloud Foundry (PCF) Ops Manager v2.1.

### 2.1.7

* **[Bug Fix]**: Ops Manager syncs with the configured NTP Server, resolving the issue in the following KB article: https://community.pivotal.io/s/article/Operations-Manager-does-not-Sync-with-the-Configured-NTP-Server-in-PCF-20. 
* **[Bug Fix]**: Enables BOSH DNS healthiness. 
* **[Security Fix]** On vSphere, the `ubuntu` user must enter their password when using `sudo`. 
* **[Security Fix]**: Bumps Sprockets to v3.72 or later for CVE. See [[CVE-2018-3760] Path Traversal in Sprockets](https://groups.google.com/forum/#!topic/ruby-security-ann/2S9Pwz2i16k) for more information.

Ops Manager v2.1.7 uses the following component versions:

<table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.34*</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4*</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.3.0*</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.6.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.5*</td>
  </tr><tr>
    <td>UAA</td><td>55.1*</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>25.10.0</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>35</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
</table>

### 2.1.6

* **[Security]** Remediates [CVE-2018-11046](https://pivotal.io/security/cve-2018-11046).
* **[Bug Fix]** You can now rotate SSL certificates without losing connection between BOSH Director and VMs. 
* **[Bug Fix]** You can now delete the only AZ in an installation.
* **[Bug Fix]** You can now delete the only network in an installation.

Ops Manager v2.1.16 uses the following component versions:

<table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3468.46</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.2.1</td>
  </tr><tr>
    <td>BOSH Director</td><td>264.10.0</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.6.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.6.5</td>
  </tr><tr>
    <td>UAA</td><td>52.7</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>25.10.0</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>35</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
</table>

### 2.1.5

* **[Bug Fix]** Changes vSphere to v45.1
* **[Security Fix]** Bumps stemcell to 3541.30
* Bumps CredHub to v1.7.5

Ops Manager v2.1.5 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.30*</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.2</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.6.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.5*</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1*</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### 2.1.4

<p class="note warning"><strong>WARNING:</strong> If you use a vSphere environment, Pivotal recommends that you skip v2.1.4 due to a major bug. </p>

* Bumps vSphere to v49
* **[Feature Improvement]** Decrease upload time for large tiles and stemcells.
* **[Bug Fix]** Helps alleviate Ruby's susceptibility to high memory usage. May prevent the Ops Manager VM from running out of memory during a long VM lifecycle.
* **[Bug Fix]** Ops Manager UI shows product job log download link only once per instance group rather than for all instances.
* **[Bug Fix]** The Ops Manager API endpoint `/api/v0/deployed/certificates` now lists all RSA certificates.
* **[Bug Fix]** Azure network and resource group matchers are case insensitive.
* **[Bug Fix]** The Ops Manager API no longer has the `service_network` key.
* **[Bug Fix]** The menu links are clickable in all subpages.
* **[Bug Fix]** In the Stemcell Library, stemcells only apply to the tiles you select regardless of compatibility.


Ops Manager v2.1.4 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.25</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.2</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.6.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.1</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>49*</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### 2.1.3

* **[Security]** Bumps stemcell to 3541.25
* Bumps BOSH DNS to 1.6.0
* **[Bug Fix]** The credentials API endpoints for deployed products do not include secrets. For more information about these API endpoints, see [Viewing available credentials](https://opsman-dev-api-docs.cfapps.io/#viewing-available-credentials) and [Fetching credentials](https://opsman-dev-api-docs.cfapps.io/#fetching-credentials) in the Ops Manager API documentation.
* Installation Dashboard includes new Azure logo when you have an Azure installation.


Ops Manager v2.1.3 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.25*</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.2</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.6.0*</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.1</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### 2.1.2

* **[Security]** Bumps stemcell to 3451.12
* **[Feature]** You are now able to fetch availability zones (AZs) from the Ops Manager API. For more information, see [Fetching availability zones](https://opsman-dev-api-docs.cfapps.io/#fetching-availability-zones) in the Ops Manager API documentation.



Ops Manager v2.1.2 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3451.12*</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.2</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.3.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.1</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### 2.1.1

* **[Security]** Bumps stemcell to 3451.10
* **[Feature]** The BOSH CLI is now upgraded to v3 in Ops Manager. You can split cloud configs and other configurations into multiple files. This change allows you to manage and evolve configurations separately. For more information on configuration management in BOSH, see [Configs](http://bosh.io/docs/configs.html) in the BOSH documentation.
* **[Feature]** In the **Director Config** pane, you can now enter **Excluded Recursors** as a comma-separated list. This list specifies which IPs and ports you want to exclude from the DNS server. For more information, see [Director Config Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/gcp-om-config.html#director-config).
* **[Bug Fix]** Ops Manager sets a consistent entity ID in both SAML and non-SAML cases.
* Bumps BOSH Director to v265.2


Ops Manager v2.1.1 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3451.10*</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.2*</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.3.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.1</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### 2.1.0

Ops Manager v2.1.0 uses the following component versions:

 <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.8</td>
  </tr><tr>
    <td>BBR SDK</td><td>1.4.4</td>
  </tr><tr>
    <td>BOSH Director</td><td>265.1</td>
  </tr><tr>
    <td>BOSH DNS</td><td>1.3.0</td>
  </tr><tr>
    <td>CredHub</td><td>1.7.1</td>
  </tr><tr>
    <td>UAA</td><td>55</td>
  </tr><tr>
    <td>AWS CPI</td><td>69</td>
  </tr><tr>
    <td>Azure CPI</td><td>35</td>
  </tr><tr>
    <td>GCP CPI</td><td>27</td>
  </tr><tr>
    <td>OpenStack CPI</td><td>37</td>
  </tr><tr>
    <td>vSphere CPI</td><td>45.1.0</td>
  </tr><tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

<hr>

## <a id='major-features'></a>New Features in Ops Manager v2.1

### <a id="stemcell-manager"></a> Stemcell Library

Use the new Stemcell Library to import stemcells, stage stemcells, and view the 
stemcell versions associated with each product. 

In Ops Manager v2.0 and earlier, stemcell management capabilities are located 
within each tile. 
For v2.1, the Stemcell Library provides centralized stemcell management from the **Installation Dashboard** used for all products.

For more information about the Stemcell Library, see [Importing and Managing Stemcells](http://docs.pivotal.io/2-1/opsguide/managing-stemcells.html).

### <a id="custom-vm-extensions"></a> Create Custom VM Extensions

You can create and manage custom VM extensions through the Ops Manager API. Custom VM extensions allow you to assign a group of IaaS-specific `cloud_properties` to a custom VM extension `name`. You can then assign this custom VM extension to jobs. For more information about custom VM extensions, see [Managing Custom VM Extensions](http://docs.pivotal.io/pivotalcf/2-1/customizing/custom-vm-extensions.html).

### <a id="azure-stack"></a>Azure Stack Support (Beta)

Operators can deploy Ops Manager v2.0 to Microsoft Azure in their own local datacenter using Azure Stack. **Azure Stack support is in beta** for Ops Manager v2.0 and should not be used in production.

### <a id="custom-kms"></a> AWS KMS Encryption Available for BOSH and Ops Manager VMs

Operators can specify a custom AWS Key Management Service (KMS) encryption key to encrypt all the Elastic Block Store (EBS) volumes in AWS for BOSH VMs and the Ops Manager VM. You can use this feature to meet data-at-rest encryption requirements or as a security best practice. There is no performance penalty for using encrypted EBS volumes. Pivotal advises all users of PCF on AWS to enable encryption.

To encrypt BOSH and all present and future product VMs, enable **Encrypt EBS Volumes** in the **AWS Config** pane of the BOSH Director. To encrypt the Ops Manager VM, you need to re-launch Ops Manager with a new Amazon Machine Image (AMI).

For more information about how to encrypt BOSH and Ops Manager VMs, see [Configuring Amazon EBS Encryption](http://docs.pivotal.io/pivotalcf/2-1/customizing/cloudform-om-ebs-config.html).

### <a id="credhub-hsm"></a> Configure an External CredHub Encryption Provider

In the **Director Config** pane of an installation, you now have the option to select a **CredHub Encryption Provider** to store your encryption keys. For Ops Manager v2.1, you only have the option to select internal storage or a Luna Hardware Security Module (HSM). For more information about configuring your CredHub encryption provider, see [Director Config Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/gcp-om-config.html#director-config).

### <a id="multiple-logins"></a> Multiple Read-Only Users Can Be Logged in Simultaneously

Ops Manager users with **Full View** and **Restricted View** permissions can be logged in simultaneously. Previous to this change, only one user at a time could view Ops Manager.

For security purposes, operators with write access still cannot be logged into Ops Manager simultaneously. For more information about operator roles and permissions, see [Configuring Role-Based Access Control (RBAC) in Ops Manager](http://docs.pivotal.io/pivotalcf/opsguide/config-rbac.html).

### <a id="custom-banner"></a> Create a Custom Banner

From the Ops Manager settings, you can now add a custom banner to communicate important messages to operators. In the new **Custom Banner** pane, enter text in the **Banner UI** field to create a banner that appears on each page of the Ops Manager UI. If you enter text in the **SSH Banner** field, that text appears to each operator who shells into Ops Manager. For more information about navigating Ops Manager settings, see [Settings Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/pcf-interface.html#settings).

### <a id="gcs-blobstore"></a> GCS Blobstore Available for External File Storage

You now have the option to select a Google Cloud Storage (GCS) blobstore as your external file storage. With this new feature, Pivotal now recommends you select the **GCS Blobstore** option for the **Blobstore Location** if you install Ops Manager with GCP. For more information, see the [Director Config Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/gcp-om-config.html#director-config) section of *Configuring Ops Manager Director on GCP*.

<p class="note"><strong>Note: </strong>After you deploy Ops Manager, you cannot change the blobstore location.</p>

### <a id="azure-application-gateway"></a> Integrate Azure Application Gateway Load Balancers

In the **Resource Config** pane of the Azure configuration dashboard, you can enter an Azure Application Gateway for your load balancer.

To learn more about Azure Application Gateway, see [Overview of Application Gateway](https://docs.microsoft.com/en-us/azure/application-gateway/application-gateway-introduction) in the Azure documentation.

To learn more about configuring your load balancer for Azure, see the [Resource Config Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/azure-om-config.html#resource-config) section in the *Configuring Ops Manager on Azure* topic.

<p class="note"><strong>Note: </strong> This feature is not recommended for production use. The Azure load balancer does not support an override port in the healthcheck configuration.</p>

### <a id="multiple-clusters"></a> Add Multiple Clusters to Availability Zones

In the vSphere configuration dashboard, you can now add multiple clusters to an Availability Zone (AZ) with the new **Add Cluster** button. For more information about configuring AZs, see [Create Availability Zone Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/vsphere-config.html#create-az) in the _Configuring Ops Manager on vSphere_ topic.

### <a id="ip-discontinued"></a> IP Address Management (IPAM) Removed

Ops Manager no longer reserves a range of IPs for dynamic allocation. Instead, only the BOSH Director manages IP allocation. This change is to keep IP management in a central location without redundancy.

As a result of removing IPAM from Ops Manager, see the following changes:

- Ops Manager no longer picks and reserves a range of static IPs. IP allocation is handled by BOSH.
- To optionally reserve specific IPs, enter IPs in the **Static IPs** pane of your product tile.
- With restrictions now removed, you have more options to expand your network. See [Expand Your Network with Additional Subnets](#add-subnets) below.
- The **Service Network** checkbox in the **Create Networks** pane has been removed.
- You get an ignorable warning when you click **Apply Changes** if the **Static IPs** you enter for your tile are not in the same network or AZ that is assigned to the tile.
- You get an ignorable warning when you click **Apply Changes** if the **Static IPs** you enter for your tile overlap with other tiles.
- You get an ignorable warning when you click **Apply Changes** if you enter a CIDR range that is not large enough to deploy the staged tiles.
- For tile authors, `static_ip` and `dynamic_ip` are now ignored. Ops Manager gets static IPs from the `static_ips` property.


### <a id="add-subnets"></a> Expand Your Network with Additional Subnets

In the **Create Networks** pane of Ops Manager, you can add additional subnets to your network. Each AZ can now have more than one subnet.

This feature is only available if you have already deployed Ops Manager. For more information, see [Expanding Your Network with Additional Subnets](http://docs.pivotal.io/pivotalcf/2-1/customizing/add-subnets.html).

### <a id="vpc-id"></a> VPC Verifier Removed from AWS Configuration

When you configure Ops Manager for AWS, you do not need to provide a Virtual Private Cloud (VPC) ID.

### <a id="alb"></a> Associate AWS ALBs with Jobs

From the **Resource Config** pane of an AWS installation, you can associate an AWS Application Load Balancer (ALB) to a job. For more information, see [Resource Config Page](http://docs.pivotal.io/pivotalcf/2-1/customizing/pcf-aws-manual-om-config.html#pcfaws-om-rscestem) in the AWS configuration topic.

## <a id="known-issues"></a> Known Issues

###<a id="override-port"></a> Azure Load Balancer Does Not Support Override Port
The Azure Application Gateway feature is currently not recommended for production use. The Azure load balancer does not support an override port in the healthcheck configuration. For more information about this feature, see [Integrate Azure Application Gateway Load Balancers](#azure-application-gateway) above.

###<a id="cloud-properties-changes"></a>AWS KMS Encryption Requires Manual Refresh

If you select **Encrypt EBS Volumes** in the **AWS Config** pane of your AWS BOSH Director tile, only future BOSH-deployed VMs are encrypted. To manually trigger current BOSH VMs to encrypt their persistent disks, ephemeral disks, and the root separately, you must make the following changes:
<table class="nice">
  <tr>
    <th>For persistent disks</th>
    <td>In the **Resource Config** pane of your BOSH Director tile, bump the persistent disk of each job.</td>
  </tr>
  <tr>
    <th>For ephemeral disks</th>
    <td>In the **Director Config** pane of your BOSH Director tile, enable **Recreate all VMs** for the next deployment.</td>
  </tr>
  <tr>
    <th>For the root disk</th>
    <td>In the **Stemcell Library**, stage new stemcells for the next deployment.</td>
  </tr>
</table>

This known issue does not affect you if you enable **Encrypt EBS Volumes** during your first deployment.

For more information about the AWS KMS feature, see [AWS KMS Encryption Available for BOSH and Ops Manager VMs](#custom-kms).

## <a id="bug-fixes"></a> Bug Fixes

* Ops Manager now validates inventory service vSphere vCenter privileges. For more information about this breaking change, see [Additional vSphere Permission Validation](breaking-changes.html#inventory-service) in the _PCF v2.1 Breaking Changes_ release notes.
* Ops Manager sets a consistent entity ID in both SAML and non-SAML cases.
