---
title: Pivotal Application Service v2.5 Release Notes
owner: Release Engineering
---

Pivotal Cloud Foundry is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='releases'></a> Releases

<p class="note warning"><strong>Warning:</strong> Before installing or upgrading to PAS v2.5, review the <a href="./breaking-changes.html#critical-breaking">Critical Breaking Changes in PCF v2.5</a>.</p>

### <a id='2.5.2'></a> 2.5.2

* **[Feature]** Add extension buildpack support for the binary buildpack on Windows
* **[Feature]** `push-apps-manager` job can read configured UAA SAML providers
* **[Feature]** Task pruning age can be configured to allow PAS users with very high numbers of tasks to reduce load on the Cloud Controller database.
* **[Feature]** Add R offline buildpack
* **[Feature]** Add NGINX offline buildpack
* **[Feature Improvement]** Configure Diego LRP zones in Azure to point to BOSH AZs Zone
* **[Feature Improvement]** Link directly to cflinuxfs3 migration documentation
* **[Feature Improvement]** Add support for staging Docker images from repositories using schema version 2 manifests
* **[Bug Fix]** Fix issue where empty or malformed certificates would cause CredHub to fail to start.
* **[Bug Fix]** Increase TLS Certificate verification depth in Apps Manager to allow for longer certificate chains
* **[Bug Fix]** Improve performance when loading the home page on a foundation with many organizations
* **[Bug Fix]** Remove clear input icon that was overlaid on content from search bar on IE
* Bump ubuntu-xenial stemcell to version `250.29`
* Bump bpm to version `1.0.4`
* Bump capi to version `1.76.6`
* Bump cf-autoscaling to version `218`
* Bump cflinuxfs3 to version `0.80.0`
* Bump credhub to version `2.1.5`
* Bump diego to version `2.27.6`
* Add new release nginx-offline-buildpack at version `1.0.9`
* Bump push-apps-manager-release to version `668.0.9`
* Add new release r-offline-buildpack at version `1.0.7`
* Bump ruby-offline-buildpack to version `1.7.36`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>250.29</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.12.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.31</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.0.4</td></tr>
    <tr><td>capi</td><td>1.76.6</td></tr>
    <tr><td>cf-autoscaling</td><td>218</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.13.0</td></tr>
    <tr><td>cf-networking</td><td>2.20.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.40</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.2</td></tr>
    <tr><td>cflinuxfs3</td><td>0.80.0</td></tr>
    <tr><td>consul-drain</td><td>0.0.3</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.5</td></tr>
    <tr><td>diego</td><td>2.27.6</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.7</td></tr>
    <tr><td>garden-runc</td><td>1.19.0</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.35</td></tr>
    <tr><td>haproxy</td><td>9.4.1</td></tr>
    <tr><td>istio</td><td>1.0.1</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.18</td></tr>
    <tr><td>log-cache</td><td>2.1.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.3</td></tr>
    <tr><td>loggregator</td><td>103.4</td></tr>
    <tr><td>mapfs</td><td>1.1.4</td></tr>
    <tr><td>metric-registrar</td><td>1.0.4</td></tr>
    <tr><td>mysql-monitoring</td><td>9.2.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.8</td></tr>
    <tr><td>nginx-offline-buildpack</td><td>1.0.9</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.45</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>55</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.72</td></tr>
    <tr><td>push-apps-manager-release</td><td>668.0.9</td></tr>
    <tr><td>push-usage-service-release</td><td>669.0.9</td></tr>
    <tr><td>pxc</td><td>0.14.2</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.29</td></tr>
    <tr><td>r-offline-buildpack</td><td>1.0.7</td></tr>
    <tr><td>routing</td><td>0.187.1</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.36</td></tr>
    <tr><td>silk</td><td>2.20.0</td></tr>
    <tr><td>smb-volume</td><td>1.0.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.40</td></tr>
    <tr><td>statsd-injector</td><td>1.6.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>71.0</td></tr>
  </tbody>
</table>

### <a id='2.5.1'></a> 2.5.1

* **[Feature Improvement]** Add support for TCP hitless reloads in haproxy to avoid connection reset errors
* **[Feature Improvement]** Auto bump the CF CLI release included with PAS for use by errands
* **[Feature Improvement]** Add ability to enable/disable gorouter hairpinning with **Bypass security checks for route service lookup**. This feature has potential security concerns, but may be needed for backwards compatibility. See the Route Service Internal Lookup Considerations section of [Route Services](https://docs.pivotal.io/pivotalcf/2-5/services/route-services.html) for details.
* **[Security Fix]** Invitations app rejects insecure HTTP requests
* **[Bug Fix]** Specify buildpack for Apps Manager and related microservice applications to remove conflicts with custom buildpacks
* **[Bug Fix]** Fix issue in which Apps Manager shows `Invalid User` as the username for space and organization members without usernames, such as UAA clients
* **[Bug Fix]** When deleting an organization in Apps Manager, the user is now redirected to the home page instead of another organization page
* **[Bug Fix]** Fix bug where Apps Manager crash errors were not displayed
* **[Bug Fix]** Fix error message that incorrectly assumed that an SSL validation error occurred on any failed connection to Apps Manager's search server
* **[Bug Fix]** Remove external link icon from dropdown items on Apps Manager's Tools page
* **[Bug Fix]** Fix bug where app changes pushed with --no-start does not take effect when the app was started via Apps Manager
* **[Bug Fix]** Fix alignment of search results in Apps Manager
* **[Bug Fix]** Fix failed access checks on mount for NFS volume service with some Windows NFS servers
* **[Bug Fix]** Fix issue that can cause the Spring Boot actuator integration with Apps Manager to stop working after a rolling deployment
* **[Bug Fix]** Fix feature: "Operator can specify headers to be stripped from the response by the router"
* **[Bug Fix]** Fix diego rep to always clean up temporary download cache directory
* Bump ubuntu-xenial stemcell to version `250.25`
* Bump binary-offline-buildpack to version `1.0.31`
* Bump capi to version `1.76.5`
* Bump cf-autoscaling to version `217`
* Bump cf-cli to version `1.13.0`
* Bump cflinuxfs3 to version `0.76.0`
* Bump diego to version `2.27.4`
* Bump dotnet-core-offline-buildpack to version `2.2.7`
* Bump garden-runc to version `1.19.0`
* Bump go-offline-buildpack to version `1.8.35`
* Bump java-offline-buildpack to version `4.18`
* Bump nfs-volume to version `1.7.8`
* Bump nodejs-offline-buildpack to version `1.6.45`
* Bump php-offline-buildpack to version `4.3.72`
* Bump push-apps-manager-release to version `668.0.8`
* Bump python-offline-buildpack to version `1.6.29`
* Bump routing to version `0.187.1`
* Bump ruby-offline-buildpack to version `1.7.34`
* Bump staticfile-offline-buildpack to version `1.4.40`
* Bump uaa to version `71.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>250.25</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.12.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.31</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.0.3</td></tr>
    <tr><td>capi</td><td>1.76.5</td></tr>
    <tr><td>cf-autoscaling</td><td>217</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.13.0</td></tr>
    <tr><td>cf-networking</td><td>2.20.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.40</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.2</td></tr>
    <tr><td>cflinuxfs3</td><td>0.76.0</td></tr>
    <tr><td>consul-drain</td><td>0.0.3</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.2</td></tr>
    <tr><td>diego</td><td>2.27.4</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.7</td></tr>
    <tr><td>garden-runc</td><td>1.19.0</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.35</td></tr>
    <tr><td>haproxy</td><td>9.4.1</td></tr>
    <tr><td>istio</td><td>1.0.1</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.18</td></tr>
    <tr><td>log-cache</td><td>2.1.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.3</td></tr>
    <tr><td>loggregator</td><td>103.4</td></tr>
    <tr><td>mapfs</td><td>1.1.4</td></tr>
    <tr><td>metric-registrar</td><td>1.0.4</td></tr>
    <tr><td>mysql-monitoring</td><td>9.2.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.8</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.45</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>55</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.72</td></tr>
    <tr><td>push-apps-manager-release</td><td>668.0.8</td></tr>
    <tr><td>push-usage-service-release</td><td>669.0.9</td></tr>
    <tr><td>pxc</td><td>0.14.2</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.29</td></tr>
    <tr><td>routing</td><td>0.187.1</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.34</td></tr>
    <tr><td>silk</td><td>2.20.0</td></tr>
    <tr><td>smb-volume</td><td>1.0.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.40</td></tr>
    <tr><td>statsd-injector</td><td>1.6.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>71.0</td></tr>
  </tbody>
</table>

### <a id='2.5.0'></a> 2.5.0

See also:

- [Breaking Changes](https://docs.pivotal.io/pivotalcf/2-5/pcf-release-notes/breaking-changes.html)
- [New Features](#new-features)


* **[Breaking Change]** Users must acknowledge having migrated apps off of cflinuxfs2 prior to upgrading to PAS 2.5
* **[Breaking Change]** Remove deprecated buffer size config from the `Logging System` pane
* **[Breaking Change]** Remove `cflinuxfs2` root filesystem and buildpacks
* **[Breaking Change]** Remove unused `enable_log_cache` property. See [Removed Log Cache Property](./breaking-changes.html#log-cache).
* **[Breaking Change]** Remove inactive DNS server configuration that only applied to older deployments without BOSH DNS
* **[Breaking Change]** Remove unused Apps Manager UAA client and refresh token property. See [Removed Unused Apps Manager UAA Client and Property](./breaking-changes.html#apps-man).
* **[Breaking Change]** Remove option to override deployment name to CF. See [Removed Option to Override Deployment Name to CF](./breaking-changes.html#deployment-name).
* **[Breaking Change]** Remove unused jobs `mysql-restore` and `mysql-backup`
* **[Breaking change]** Increase default and minimum CPU core count from 1 to 2 for internal blobstore VMs to improve reliability
* **[Breaking Change]** Bump log-cache API to version 2.x which moves `/v1` endpoints to `/api/v1`
* **[Breaking Change]** Internal MySQL always uses Percona XtraDB Cluster
* **[Feature]** Add optional Istio based routing tier (BETA). See [Optional Istio-Based Routing Tier (BETA)](#istio).
* **[Feature]** Add ability to disable network policy enforcement between applications. See [Disable Network Policy Enforcement Between Apps](#disable-policy-enforcement).
* **[Feature]** Apps manager includes new home page and allows users to search for apps, spaces, orgs and service instances
* **[Feature]** Add metric-registrar to enable App Developers to output custom application metrics that can be monitored by platform-provided tooling
* **[Feature]** Users in `usage_service.audit` group can access the Usage Service API using their CF OAuth token
* **[Feature Improvement]** Cloud Controller fetches application metrics from `log-cache`
* **[Feature Improvement]** BPM is enabled for Credhub
* **[Feature Improvement]** nfs-broker connects to its database using TLS

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>250.21</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.12.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.30</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.0.3</td></tr>
    <tr><td>capi</td><td>1.76.3</td></tr>
    <tr><td>cf-autoscaling</td><td>216</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.12.0</td></tr>
    <tr><td>cf-networking</td><td>2.20.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.40</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.2</td></tr>
    <tr><td>cflinuxfs3</td><td>0.72.0</td></tr>
    <tr><td>consul-drain</td><td>0.0.3</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.2</td></tr>
    <tr><td>diego</td><td>2.27.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.5</td></tr>
    <tr><td>garden-runc</td><td>1.18.0</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.33</td></tr>
    <tr><td>haproxy</td><td>9.4.1</td></tr>
    <tr><td>istio</td><td>1.0.1</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16.1</td></tr>
    <tr><td>log-cache</td><td>2.1.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.3</td></tr>
    <tr><td>loggregator</td><td>103.4</td></tr>
    <tr><td>mapfs</td><td>1.1.4</td></tr>
    <tr><td>metric-registrar</td><td>1.0.4</td></tr>
    <tr><td>mysql-monitoring</td><td>9.2.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.7</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.43</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>55</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.70</td></tr>
    <tr><td>push-apps-manager-release</td><td>667.0.10</td></tr>
    <tr><td>push-usage-service-release</td><td>669.0.9</td></tr>
    <tr><td>pxc</td><td>0.14.2</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.28</td></tr>
    <tr><td>routing</td><td>0.186.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.31</td></tr>
    <tr><td>silk</td><td>2.20.0</td></tr>
    <tr><td>smb-volume</td><td>1.0.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.39</td></tr>
    <tr><td>statsd-injector</td><td>1.6.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>69.0</td></tr>
  </tbody>
</table>




## <a id='upgrade'></a> How to Upgrade

The procedure for upgrading to Pivotal Application Service (PAS) v2.5 is documented in the [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/pivotalcf/2-5/customizing/upgrading-pcf.html) topic.

When upgrading to PAS v2.5, be aware of the following upgrade considerations:

* If you previously used an earlier version of PAS, you must first upgrade to PAS v2.4 to successfully upgrade to PAS v2.5.

* Some partner service tiles may be incompatible with PCF v2.5. Pivotal is working with partners to ensure their tiles are updated to work with the latest versions of PCF.<br/><br/> For information about which partner service releases are currently compatible with PCF v2.5, review the appropriate partners services release documentation at [https://docs.pivotal.io](https://docs.pivotal.io), or contact the partner organization that produces the tile.


## <a id='new-features'></a> New Features in PAS v2.5

### <a id='cflinuxfs3'></a> PAS Only Supports cflinuxfs3

`cflinuxfs3` is the only stack supported in PAS v2.5. In PAS v2.4, both the `cflinuxfs3` and `cflinuxfs2` stacks were supported.

All apps using `cflinuxfs2` must be restaged with `cflinuxfs3` before upgrading to PAS v2.5. For more information, see the [Migrate Apps to cflinuxfs3](https://docs.pivotal.io/pivotalcf/2-5/upgrading/checklist.html#cflinuxfs3) of the _Upgrade Preparation Checklist for PCF v2.5_ topic.

The `cflinuxfs3` stack is derived from Ubuntu Bionic 18.04. The `cflinuxfs2` stack is derived from Ubuntu Trusty 14.04, for which support ends in April 2019. For more information, see [cflinuxfs3 Release](https://bosh.io/releases/github.com/cloudfoundry/cflinuxfs3-release?all=1) in the BOSH documentation.

### <a id="disable-policy-enforcement"></a> Disable Network Policy Enforcement Between Apps

You can disable Silk network policy enforcement between apps in the **Networking** pane of the PAS tile. Disabling network policy enforcement allows all apps to send network traffic to all other apps in the foundation despite no policy specifically allowing it.

Silk is a network fabric for containers designed for Cloud Foundry. For more information about Silk, see [silk](https://github.com/cloudfoundry/silk) in GitHub.

### <a id="istio"></a> Service Mesh Routing Plane (Beta)

Operators have the option to deploy a service mesh routing plane in addition to the existing HTTP and TCP routers. The first new feature provided by service mesh is weighted routing.

For more information, see [Service Mesh (Beta)](https://docs.pivotal.io/pivotalcf/2-5/adminguide/service-mesh.html).

### <a id="weighted routing"></a> Weighted Routing (Beta)

In deployments with service mesh configured, developers can configure routing weights for apps. Weighted routing allows you to map multiple apps to the same route and control the amount of traffic sent to each of them. Some use cases include include A/B testing, canary releases, or rolling out features over time to incremental user-bases.

For more information, see [Using Weighted Routing (Beta)](https://docs.pivotal.io/pivotalcf/2-5/devguide/weighted-routing.html).

### <a id='routability'></a> Diego BBS Increases Routing Stability

Diego Bulletin Board System (BBS) improves routability for application instances running on cells with unstable presences.

Previously, when the cell missed a heartbeat, application instances on unstable cells were immediately replaced and routability was terminated. Now, when the cell misses a heartbeat, the routing to the application instance is maintained in case the cell is able to regain its presence. A replacement app is scheduled in case the cell does not regain its presence.

### <a id='multiple-ports'></a> Support For Apps That Require Multiple Ports

PAS v2.5 supports apps that require multiple ports and apps that require custom ports. This update allows additional apps, such as Docker images and apps with TCP protocols that require multiple ports, to run on PAS.

For more information, see [Configuring CF to Route Traffic to Apps on Custom Ports](https://docs.pivotal.io/pivotalcf/2-5/devguide/custom-ports.html).

### <a id='app-policies'></a> Configure Networking Policies Across Spaces Using the cf CLI

You can use the Cloud Foundry Command Line Interface (cf CLI) to configure networking policies across spaces in your PCF foundation. This allows you to quickly manage and configure networking policies without using the API.

### <a id="asynch-bind"></a> Apps Manager Supports Asynchronous Service Bindings

Apps Manager supports services that take advantage of the flexibility of asynchronous bindings. Asynchronous bindings provide service brokers more time to perform the operations required to complete a bind. This can help service brokers avoid timing out
for synchronous operations in PAS.

When you bind an app to a service that uses asynchronous bindings, Apps Manager displays the status of the service while the bind is still pending.

For more information about asynchronous operations in services, see the [Open Service Broker API](https://github.com/openservicebrokerapi/servicebroker/blob/v2.13/spec.md#synchronous-and-asynchronous-operations) documentation.

### <a id="metadata"></a> Specify Metadata for Apps, Orgs, and Spaces

You can specify metadata to provide additional information about apps, orgs, and spaces. Metadata can help with operating, monitoring, and auditing your PAS deployment. Example uses of metadata include environment information, billing codes, points of contact, and information about security or risk.

You can specify two types of metadata: labels and annotations. You can query objects based on labels but not annotations.

For more information about metadata and how to add, update, and view metadata, see [Using Metadata](https://docs.pivotal.io/pivotalcf/2-5/adminguide/metadata.html).

### <a id='garden-debug'></a> Generate Garden Component Logs with Binary File

Garden, the component that PCF uses to create and manage isolated environments called containers, includes a binary file called `dontpanic`. Operators can run `/var/vcap/packages/garden/bin/dontpanic` to generate a tar file of Garden component logs for use in troubleshooting or reporting an issue.

For more information about Garden, see [Garden](https://docs.pivotal.io/pivotalcf/concepts/architecture/garden.html).

### <a id='jobs-removed'></a> mysql-restore and mysql-backup Jobs Are Removed

PAS v2.5 does not use the `mysql-restore` and `mysql-backup` jobs to back up MySQL internally. Instead, each BOSH job is backed up separately with the BBR. `mysql-restore` and `mysql-backup` have therefore been removed.

For more information, see [Backing Up and Restoring Pivotal Cloud Foundry](https://docs.pivotal.io/pivotalcf/2-5/customizing/backup-restore/).

### <a id='container-metrics'></a> Cloud Controller Retrieves Container Metrics from Log Cache

In PAS v2.5, Cloud Controller supports retrieving container metrics both from Traffic Controller and directly from Log Cache. When Cloud Controller retrieves container metrics directly from Log Cache, it can use the new Diego metric tags with these metric envelopes.

As for Traffic Controller, the `containermetrics/app-guid` endpoint no longer exists.

For more information about Log Cache and Traffic Controller, see [Configuring Logging in PAS](https://docs.pivotal.io/pivotalcf/2-5/opsguide/logging-config-opsman.html), [Loggregator Architecture](https://docs.pivotal.io/pivotalcf/2-5/loggregator/architecture.html), and [Overview of Logging and Metrics](https://docs.pivotal.io/pivotalcf/2-5/loggregator/data-sources.html).

## <a id='known-issues'></a> Known Issues

### <a id='extended-cf-logs-downtime'></a> Extended cf logs Downtime

When upgrading from PAS v2.4, there is extended `cf logs` downtime. This causes the smoke test errand to fail during upgrade.

### <a id='scheduler'></a> Scheduler Fails to Deploy If Connecting to MySQL Over TLS

Scheduler for PCF has a dependency on MySQL for PCF v2.x and currently does not support connecting to a MySQL database over TLS. If MySQL for PCF v2.x is configured to require TLS connection to the database, Scheduler fails to install.

Pivotal recommends configuring Scheduler to allow **Optional TLS**. This approach can be applied to other use cases, such as Spring Cloud Services, or for developer applications.

For more information, see [PAS Scheduler fails to deploy in 2.5](https://community.pivotal.io/s/article/pas-scheduler-fails-to-deploy-in-2-5) in the Pivotal Knowledge Base.

### <a id='cc-error'></a> Cloud Controller Error Causes PCF Upgrade to Fail

With buildpacks now having stack associations, additional validation must be added while upgrading to PAS v2.2 and later. This can generate a new `StacklessAndStackfulMatchingBuildpacksError` error in the post-start scripts.

For more information and instructions for resolving this issue, see [Pivotal Cloud Foundry upgrade fails with a StacklessAndStackfulMatchingBuildpacksExistError Cloud Controller Error](https://community.pivotal.io/s/article/pcf-upgrade-fails-with-stacklessandstackfulmatchingbuildpacksexisterror) in the Pivotal Knowledge Base.

### <a id='usage-errand'></a> Apps Usage Service Errand Fails on Foundations With Self-Signed Certificates

The Apps Usage Service errand fails to deploy in PAS on foundations that use a self-signed or private certificate for Transport Layer Security (TLS). The Apps Usage Service errand fails with the following `curl` SSL error:

```
curl: (60) server certificate verification failed.
CAfile: /etc/ssl/certs/ca-certificates.crt
CRLfile: none
More details here: http://curl.haxx.se/docs/sslcerts.html
curl performs SSL certificate verification by default, using a "bundle" of Certificate Authority (CA) public keys (CA certs).
If the default bundle file isn't adequate, you can specify an alternate file using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use the -k (or --insecure) option. Error: failed to run job-process: exit status 1 (exit status 1)
```

This error occurs because the Apps Usage Service errand uses native `curl` instead of `cf curl` to query an API endpoint.  The native `curl` command fails SSL verification in the PAS deployment.

For more information and instructions for resolving this issue, see [Apps Usage errand fails in PAS 2.5 with curl SSL error](https://community.pivotal.io/s/article/apps-usage-errand-fails-in-pas-2-5-with-curl-ssl-error).

### <a id='http-headers'></a> HTTP Response Headers Field Not Functional

The **Remove Specified HTTP Response Headers** field is not functional. If you modify this field, the router does not remove the headers as expected. This is due to a bug that prevents the configuration from being applied to the underlying job.

For more information, see [Remove Specified HTTP Response Headers in PCF does not work](https://community.pivotal.io/s/article/remove-specified-http-response-headers-in-pcf-does-not-work) in the Pivotal Knowledge Base.

### <a id=''></a> Azure Availability Zones Not Compatible with Diego

While PAS v2.5 supports Azure availability zones (AZs), enabling this feature is not recommended for production workloads. With Azure AZs, Diego cannot detect which zone the cells are in. This means PAS cannot distribute app instances across different AZs, causing PCF not to run in high availability mode.

For more information, see [Azure Availability Zones are not compatible with Diego in PAS 2.5](https://community.pivotal.io/s/article/azure-availability-zones-are-not-compatible-with-deigo) in the Pivotal Knowledge Base.

### <a id="appsman-ssl-validation"></a> Apps Manager SSL Validation Cannot Be Disabled in v2.5.0--2.5.2

In v2.5.0--2.5.2, Apps Manager ignores the **Disable SSL certificate verification for this environment** PAS tile setting. For environments using SSL certificates signed by an untrusted certificate authority (CA), this may cause Apps Manager to show no content.

To resolve this issue, see [Apps Manager shows no content due to SSL validation issue](https://community.pivotal.io/s/article/ssl-validation-issue-apps-manager-shows-no-content).

### <a id='appsman-cert-chain-length'></a> Apps Manager Only Allows One Intermediate Certificate Authority in v2.5.0 and v2.5.1

In v2.5.0 and v2.5.1, Apps Manager does not accept SSL certificates that have a signing chain with more than one intermediate certificate authority between the SSL certificate and the root certificate authority. This includes certificates from backend services such as the Cloud Controller API. 

If there is more than one certificate authority, Apps Manager does not show content, and the logs for Apps Manager include the text `certificate chain too long`.

If you must use an SSL certificate chain with more than one intermediate certificate authority in your environment, contact Pivotal Support to discuss options for working around this issue.


### <a id='log-error'></a> Metric Registrar App Log Error Message

An `invalid log drain` error message may appear in app logs on foundations where the Metric Registrar is enabled. This error message indicates that the current version of Loggregator cannot parse the scheme used by the Metric Registrar. 

This error message does not indicate that the app logs are incorrect or incomplete. There is no action required. 

