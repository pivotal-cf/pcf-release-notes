---
title: Pivotal Elastic Runtime v1.7.0.0 Release Notes
owner: Release Engineering
---

### Versions 1.7.0 and higher versions of Elastic Runtime consist of these Cloud Foundry versions:

- CF Release version: 235
- Diego version: 0.1467
- Garden version: 0.337 -> 0.338 as of Elastic Runtime 1.7.5
- CF MySQL version: 25.2
- etcd version: 45 -> 49 as of Elastic Runtime 1.7.28
- Apps Manager release version: 629
- Consul version: 80 -> 96 as of Elastic Runtime 1.7.12 -> 101 as of Elastic Runtime 1.7.26
- UAA versions:
-- Elastic Runtime 1.7.27 and greater are on UAA 3.6.2
-- Elastic Runtime 1.7.24 to 1.7.26 are on UAA 3.6.1
-- Elastic Runtime 1.7.21 to 1.7.23 are on UAA 3.3.0.6
-- Elastic Runtime 1.7.20 is on UAA 3.6.0
-- Elastic Runtime 1.7.16 to 1.7.19 are on UAA 3.3.0.4
-- Elastic Runtime 1.7.13 to 1.7.15 are on UAA 3.3.0.3
-- Elastic Runtime 1.7.7 to 1.7.12 are on UAA 3.3.0.2
-- Elastic Runtime 1.7.3 to 1.7.6 are on UAA 3.3.0.1
-- Elastic Runtime 1.7.1 to 1.7.3 are on UAA 3.3.0

## 1.7.28

Bumps the required stemcell version to 3233.2. This stemcell is based on the 4.4 Linux kernel.
This release also changes out the Garden backend for linux machines from garden-linux to garden-runc.
Documentation for the garden-runc runtime can be found at https://github.com/cloudfoundry/garden-runc-release.

## 1.7.27

Stability fixes.

## 1.7.26

Fixes an issue where you cannot successflly deploy Consul servers with public IP addresses, in case your network that you have deployed Elastic Runtime to is not an RFC 1918 private network.
Allows the operator to define supported currencies for the service marketplace. This new property can be configured in the "Apps Manager" configuration form.
Fixes an issue with running Windows apps in Diego.

## 1.7.25

Fixes a bug where the apps-usage service could lose database connectivity while the internal mysql proxies were being deployed. This only affects deployments using internal mysql as a database.
Changes the route for the switchboard UI for the internal mysql proxies. Previously, those dashboards were located at `proxy-X-p-mysql.internal.SYSTEM_DOMAIN`.
Now they can be found at `proxy-X-p-mysql-ert.SYSTEM_DOMAIN`. This should remove the need to include an extra SAN entry in the TLS certificates for the platform.

## 1.7.24

Fixes an issue with upgrades from Elastic Runtime 1.7.20, by updating UAA to version 3.6.1.

## 1.7.23

Note: Do not upgrade to this version if you are starting with 1.7.20. You must upgrade to 1.7.24 or greater instead.

Patches USN-3087-1, USN-3087-2, CVE-2016-6662, USN-3040-1, and USN-2953-1. Additional info can be found at https://pivotal.io/security. 

## 1.7.22

Note: Do not upgrade to this version if you are starting with 1.7.20. You must upgrade to 1.7.24 or greater instead.

Re-orders the MySQL Monitor job deployment to deploy after the UAA job, so that the required UAA client is ready before the monitor deploys.

## 1.7.21

Note: Do not upgrade to this version if you are starting with 1.7.20. You must upgrade to 1.7.24 or greater instead.

Patches CVE-2016-6651. Additional info can be found at https://pivotal.io/security.

## 1.7.20

This version adds a manifest change for Diego that enables successful upgrades to a future 1.8.0 version of Elastic Runtime, once that is released.

## 1.7.19

Bumps the PHP buildpack to v4.3.18. The buildpack was exposing the `.profile` file which could contain environment variables and credentials. The PHP buildpack prior to v4.3.18 did not actually allow for execution of the .profile file, so it is unlikely that many applications were using it.

## 1.7.18

We've discovered a rare condition where a PCF deployment running an internal MySQL cluster can experience a fault in replication that may result in some data loss. When this occurs, previous releases do not log the root cause of the bug. In order to best address this issue, version 1.7.18 contains significant additional telemetry and several defensive features which will account for the failure condition and prevent data loss.

<p class='note'><strong>If any of these protections activate, it is critical that you contact Pivotal support immediately.</strong> Support will work with you to determine the nature of the cluster's failure, and advise a suggested resolution. Additionally, contacting Support will provide us with evidence that will enable us to identify and address the root cause in the future.</p>

  - **Introducing the Replication Canary**

    We've included a new long-running monitor, the **Replication Canary**. The Replication Canary continually monitors the MySQL cluster, watching for instances in which cross-cluster replication has failed. It is enabled by default, and requires an e-mail address in the Advanced Options configuration pane.<br><br>

    In the event that replication has failed, the Canary performs two actions:

    - E-mail the Operator: Part of the Replication Canary's configuration is an e-mail address, which can be directed to any Operator e-mail address, or an escalation system similar to PagerDuty.
    - Deny Access: When replication has failed, the Replication Canary will automatically disable user and applications' ability to access the cluster via the Proxies.

    - You **must** set the `Monitoring` job to 1 in the Resource Config pane, or the Replication Canary will not be enabled, regardless of configuration.
    - You **must** also confirm that the Elastic Runtime tile is properly configured to send e-mail. These settings are necessary for any standard Cloud Foundry configuration.
      - Ensure that the `Notifications` errand has been enabled.
      - Ensure that `SMTP Config` has been properly configured.

        If either of these are not set, configure and **Apply Changes** before deploying version 1.7.18.

  - **Introducing the Interruptor**

    The MySQL nodes have new logic that, when enabled, will prevent a node from re-joining a cluster under certain conditions. This is a second level of protection against the possibility of data loss.<br><br>

  - **New feature**: Backup Improvements

    - In the Internal MySQL configuration pane, there's now an option to take backups from all MySQL nodes. This feature protects your users from data loss in the case that some nodes have different data than the others.
    - Additionally, there is now the option to provide either an S3-compatible bucket or SCP endpoint for automated backups.

## 1.7.17

Removes the maximum memory restriction for the NATS VM. This artificial limit prevented some IaaSes from provisioning VMs that could support the NATS job.

## 1.7.16

Patches CVE-2016-5388 and USN-3024-1. Additional info can be found at https://pivotal.io/security.

Also adds an endpoint for Apps Usage Service to help determine if this app has corrupted data. This update will extend the app event data kept from Cloud Controller to 160 days instead of 30 days.

## 1.7.15

Patches USN-3064-1, USN-3048-1, USN-3060-1, USN-3061-1, and USN-3065-1. Additional info can be found at https://pivotal.io/security.

Also introduces a patch which addresses application routing downtime during upgrades whenever IPSec has been applied to the PCF environment. Additional info can be found in this [Knowledge Base article](https://discuss.zendesk.com/hc/en-us/articles/226130787-NATS-timeout-issue).

Also fixes an issue where the legacy Apps Manager and Apps Usage system applications were not always completely deleted from the environment to make way for the latest versions of these apps.

Also updates the size of the push-errand VM for Autoscale, to increase the chances of the errand's success.

## 1.7.14

Introduces a feature which allows you to use AWS's Server-Side Encryption (SSE) feature for your S3 buckets if you use S3 buckets as Cloud Controller's file store.

Also updates the version of Golang used by system apps in Elastic Runtime to a newer version, since Golang 1.5 will soon be end of life.

Also patches Apps Manager to address an issue where app events were not appearing in the older version of Apps Manager (the Ruby version).

Also patches Autoscale to address an issue where autoscaling was not properly scaling apps automatically and sending notifications.

## 1.7.13

This release addresses an issue where metron sometimes panics from a concurrency fault while aggregating messages when the load is higher.

## 1.7.12

This release adds all link-local addresses, in the range of 169.254.0.0/16, to be excluded from access in the default application security group of Elastic Runtime. This range includes the metadata endpoints of most IaaS providers, such as AWS. This security group does not take effect for upgrades, only new installs of Elastic Runtime. If you would like to update your pre-existing deployment, please refer to the [Application Security Groups](http://docs.pivotal.io/pivotalcf/1-7/adminguide/app-sec-groups.html) topic of our documentation.

This also introduces a patch to Cloud Controller's API that will enable use of the upcoming [Spring Cloud Data Flow](http://cloud.spring.io/spring-cloud-dataflow/)’s Task support on Cloud Foundry. More about this release will be announced soon.

This also updates Consul to v96 in preparation for future upgrades to Elastic Runtime 1.8 (the release of which is upcoming), which will require all components to adopt a new format for the bosh manifest.

## 1.7.11

Note: The Cloudformation script for PCF setup on AWS was updated at the same time as this release to switch over to using a NAT EC2 instance instead of a NAT gateway, as there is a known issue with AWS NAT gateways handling hairpin routing requests.

Patches CVE-2016-5006, USN-3012-1, USN-3010-1, and CVE-2016-4450. Additional info can be found at https://pivotal.io/security.

Also introduces a fix for GoRouter to address an issue where failover of requests to unresponsive app instances was not working properly whenever the request has a body. See [tracker story](https://www.pivotaltracker.com/n/projects/1358110/stories/118532589) for details.

Also increases the default instance size of the UAA instance to handle larger logs.

## 1.7.10

Updates the Cloud Foundry CLI used by the Pivotal Notifications and Autoscaling system applications, to address an issue where the errands that push these apps may sometimes fail on an environment with higher network latency.

This also patches Diego to increase the log-streamer message size from 4 Kb to 60 Kb. See [tracker story](https://www.pivotaltracker.com/story/show/111866195) for details.

## 1.7.9

Patches USN-3020-1. Additional info can be found at https://pivotal.io/security.

This also addresses an issue with Loggregator not properly setting timeouts on TCP connections to Cloud Controller and UAA.

## v1.7.8 Patch

Patches CVE-2016-0928 and CVE-2016-0926. Additional info can be found at https://pivotal.io/security.

This also addresses an issue with the Apps Manager push errand sometimes failing.

This also addresses an issue with rare occurrences of application containers being assigned duplicate IP addresses.

## v1.7.7 Patch

Patches CVE-2016-4468. Additional info can be found at https://pivotal.io/security.

## v1.7.6 Patch

Patches USN-3001-1. Additional info can be found at https://pivotal.io/security.

## v1.7.5 Patch

Patches USN-2985-1, USN-2985-2, USN-2981-1, USN-2970-1, USN-2966-1, USN-2994-1, USN-2987-1, USN-2990-1, USN-2983-1, and USN-2961-1. Additional info can be found at https://pivotal.io/security.

This also addresses an issue with rare occurrences of application containers being assigned duplicate IP addresses.

## v1.7.4 Patch

This only patches the CF CLI version used to push the Elastic Runtime system apps, like Apps Manager, to be more reliable. You do not need to upgrade to this version if you're already at Elastic Runtime 1.7.3.

## v1.7.3 Patch

As part of this release, there is a checkbox in the Elastic Runtime tile configuration that asks for every operator/administrator of the deployment to acknowledge that they understand how to implement application security groups successfully to secure their deployments. More info about this topic can be found here, in the [Application Security Groups](http://docs.pivotal.io/pivotalcf/1-7/adminguide/app-sec-groups.html) topic of our documentation.

This also introduces a few bug fixes, including a patch to Diego to prevent rare occurances of the route-emitter locking up, another patch to Diego to prevent Diego BBS contention issues, added AWS regions to the Region field dropdown in the S3 option for file storage to enable selection of other regions using a V4 S3 endpoint, a patch for UAA to fix a bug introduced by Elastic Runtime 1.7.2 that broke using external LDAP over SSL, and a patch to the Elastic Runtime tile user-interface for custom branding to perform better when entering base-64 encoded images for your company logos.

## v1.7.2 Patch

Patches USN-2977-1 and CVE-2016-3084. Additional info can be found at https://pivotal.io/security. Also increases the maximum length you can have for CF task commands and ensures greater reliability for etcd.

## v1.7.1 Patch

Introduces an option to configure security event tracking in the Cloud Controller logs. Also adds statsd metrics from Cloud Controller.

Also patches USN-2959-1, USN-2957-1, USN-2949-1, USN-2943-1, and USN-2935-2. Additional info can be found at https://pivotal.io/security.

If you are using Single Sign-On 1.1.0, it is recommended that you update to Single Sign-On 1.1.1. Additional info can be found at http://docs.pivotal.io/p-identity/release-notes.html.

# Version 1.7.0 New Features

## Elastic Runtime

### Diego completely replaces DEAs

Before you upgrade to Pivotal Cloud Foundry 1.7, you must migrate all apps that are currently running on DEA architecture to run on Diego architecture. Pivotal does not support DEA architecture in Pivotal Cloud Foundry 1.7. You may need to scale up your VMs before migrating applications. More information can be found [here](../../adminguide/apps-enable-diego.html).

If you have any issues migrating your applications to Diego, please contact Support.

### Elastic Runtime Tile UI Changes

The tile has been re-designed in layout to improve the configuration workflow for operators. Several configuration fields have been moved to different sections of the tile. Also, more advanced logic has been implemented for some sections to make configuring complicated networking use cases easier for operators.

### Compiled Releases

Installs and upgrades of Elastic Runtime are now much faster than before, as the installation now makes use of compiled binaries instead of source code.

### Automated Backups

Operators using Pivotal Elastic Runtime can enable automatic backup on S3-compatible blobstores. This feature can be enabled for ERT running AWS, OpenStack, or vSphere.

Please see [this topic](../../customizing/backup-restore/backup-pcf.html#backup-mysql) for more information.

### Docker Private Registries

Please see [this topic](../../opsguide/docker-registry.html) for information on Docker Trusted and Private registries.

### Unused Docker Image Cleanup

In the Application Containers configuration section of Elastic Runtime, you can configure how aggressively unused Docker Image files are removed from disk on Diego Cell VMs. The advantage to cleaning up less frequently is that subsequent push/scale events for Docker Images that have previously been run on the platform may be faster, since the image does not need to be downloaded from the Docker registry again. The "Threshold of Disk-Used (MB)" value refers to the total size of all Docker Images (whether in use or not) on an individual Cell VM.

### Route Services
Route Services are a new kind of Marketplace Service that developers can use to apply various transformations to application requests by binding an application’s route to a service instance. Through integrations with service brokers and optionally with the Cloud Foundry routing tier, providers can offer these services to developers with a familiar automated, self-service, and on-demand user experience.

Please see [this topic](../../services/route-services.html) for more information.

### Space Scoped Private Brokers
Space scoped private brokers allow a space developer to create and manage a service broker and scope it to a single space in order to allow faster iteration on service brokers without requiring full admin privileges.

Please see the [managing service brokers](../../services/managing-service-brokers.html) topic for more information.
This feature can be managed with the `space_scoped_private_broker_creation` cloud controller feature flag.

### Experimental Feature: Disk and Memory Overcommit Settings

If your apps do not use the full allocation of disk space and memory set in the <strong>Resource Config</strong> tab, you may want use this feature. These fields control the amount to overcommit disk and memory resources to assign more memory and disk space to each Diego Cell VM.

Please see [this topic](../../customizing/cloudform-er-config.html#experimental-features) for more information.

### Experimental Feature: Diego Tasks

Although you can use the V3 Tasks API to run asynchronous tasks, Pivotal reserves
the right to change this API or truncate the data about past task runs. For more
information about running one-off tasks in Cloud Foundry, see the
[Cloud Foundry V3 API Docs](http://v3-apidocs.cloudfoundry.org/version/release-candidate/index.html#tasks).

### AWS Cloudformation Script Update

You can now specify whether you would like to enable HTTP traffic to port 80 of your ELB if you are setting up an environment in AWS to deploy PCF.

### App Manager White Labeling
Pivotal Cloud Foundry® operators can now visually brand Apps Manager by changing certain text, colors, and images of the interface. Developers will see the customized interface when logging in, creating an account, resetting a password, or using Apps Manager.

Please see [this topic](../../opsguide/custom-branding.html) for more information.

##  Identity (aka UAA Server)

### UAA PW Policy Config in ERT

Operators can now specify some password policies in the UAA section of Elastic Runtime, including password length, specific character type requirements, expiration, and maximum password attempts allowed.

Please see [this topic](../../opsguide/pw-policy.html) for more information.

### UAA SAML features
Please see [this topic](../../opsguide/auth-sso.html) for more information.

### UAA Token Lifetime Settings
Please see [this topic](../../customizing/cloudform-er-config.html#er-auth-config) for more information.

# In memory...
We would like to dedicate this work in memory of our dear friend and colleague Dave Liebreich, who passed away on February 22, 2016. Thank you for everything, Dave, you are missed every day by your family here at Pivotal!

![Dave Liebreich](Dave.png)
